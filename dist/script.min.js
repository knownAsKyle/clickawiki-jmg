!function(){angular.module("clickawiki",["logger"])}(),function(){function e(){function e(e,o){if(o)switch(o=o.toString().charAt(0).toLowerCase()){case"e":return t(e);case"w":return n(e);case"i":return a(e);case"d":return a(e)}return console.log(e)}function t(e){return console.error(e)}function n(e){return console.warn(e)}function a(e){return console.info(e)}function o(e){return console.dir(e)}return{log:e,error:t,warn:n,info:a,dir:o}}angular&&(angular.module("logger",[]).factory("loggerFactory",e),e.$inject=[])}(),function(){angular.module("clickawiki").constant("constants",{useWebServer:!1,firebaseURL:"https://apiwiki.firebaseio.com",headerTitle:"Clickawiki",defaultDeleteMessage:"Are you sure you want to delete this? ",types:["ArrayList","Boolean","Character","Double","Integer","Number","Object","String","Void"],path:{templatePath:"/assets/templates/"},sortMessage:{"default":"",a:"ascending",d:"descending"},auth:{email:"admin@admin.com"},popUpDeleteSettings:{title:"Are you sure?",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#5cb85c",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",closeOnConfirm:!1,closeOnCancel:!1},loginPromptSettings:{title:"Login",text:"Please provide your access code:",type:"input",inputType:"password",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputValue:"click",inputPlaceholder:"Acess code..."}})}(),function(){function e(e,t,n,a){function o(){}function s(e){return t.remove("cw_token"),e.unauth()}function l(t){return t===!1?!1:""===t?(swal.showInputError("You need to enter your access code!"),!1):(swal.close(),void r(e.getRef(),null,t))}function r(e,t,a,o){if(o)e.authWithCustomToken(o,c);else{t=t||n.auth.email;var s={};s.email=t,s.password=a,e.authWithPassword(s,c)}}function c(e,t){e&&(swal("Login Failure",e,"error"),a.log(e,"warn"))}return{loginPrompt:l,getAuth:o,logout:s,login:r}}angular.module("clickawiki").factory("authFactory",e),e.$inject=["firebaseFactory","storageFactory","constants","loggerFactory"]}(),function(){function e(e){function t(e){return{name:e}}function n(e,n){e.push(t(n),s)}function a(e,t){e.child(t).remove(s)}function o(e,t,n){e.child(t).update(n,s)}function s(e){return e?loggerFactory.log(e):!0}return{addClass:n,removeClass:a,updateClass:o,makeNewClass:t}}angular.module("clickawiki").factory("classFactory",e),e.$inject=["loggerFactory"]}(),function(){function e(e){function t(){return a}function n(e){a.set(e,function(e){return e||"complete"})}var a=new Firebase(e.firebaseURL);return{getRef:t,update:n}}angular.module("clickawiki").factory("firebaseFactory",e),e.$inject=["constants"]}(),function(){function e(e){function t(e){return e&&13===e.keyCode?!0:!1}function n(t,n,a){var o=e.popUpDeleteSettings;t=n?e.defaultDeleteMessage+"("+t+")":t,t=t||e.defaultDeleteMessage,o.text=t,swal(o,function(e){e?(swal("Deleted!","","success"),a(!0)):(swal("Cancelled","you've stopped it!","error"),a())})}function a(e,t){var n=[],a={};return angular.forEach(e,function(e,t){var n=e;e.key=t,this.push(n)},n),n.sort(function(e,n){if(e&&n&&e.name&&n.name){var a=e.name.toLowerCase(),o=n.name.toLowerCase();return"ascending"===t?o>a?-1:a>o?1:0:"descending"===t?a>o?-1:o>a?1:0:0}}),angular.forEach(n,function(e,t){a[t]=e}),a}return{checkForEnterPress:t,confirmDelete:n,sortList:a}}angular.module("clickawiki").factory("helperFactory",e),e.$inject=["constants"]}(),function(){function e(){function e(e,t,n){e.child(t).child("methods").push(n,a)}function t(e,t,n){e.child(t).child("methods").child(n).remove(a)}function n(e,t,n,o){e.child(t).child("methods").child(n).set(o,a)}function a(e){return e?console.log(e):!0}return{addMethod:e,removeMethod:t,updateMethod:n}}angular.module("clickawiki").factory("methodFactory",e),e.$inject=[]}(),function(){function e(){function e(e,t){return a?a.setItem(e,t):!1}function t(e){return a?a.getItem(e):!1}function n(e){return a?a.removeItem(e):!1}var a=localStorage||!1;return{set:e,get:t,remove:n}}angular.module("clickawiki").factory("storageFactory",e),e.$inject=["constants"]}(),function(){function e(e,t,n,a,o,s,l,r,c){function i(e){console.log(e)}function u(e){return e.preventDefault(),c.logout(P)}function d(e){e.preventDefault(),swal(a.loginPromptSettings,c.loginPrompt)}function f(e){t(function(){$.allClasses=e.val()||{},$.sortMessage&&$.sortMessage!==a.sortMessage["default"]&&x($.sortMessage),D.info($.selectedClass),$.selectedClass&&(console.log("reseting selectedClass? ",$.allClasses[$.selectedClass.key].info),$.selectedClass.info=$.allClasses[$.selectedClass.key].info)})}function g(e){e&&(s.addClass(P,e),$.newClassName="")}function m(e){function t(t){t&&e&&(s.removeClass(P,e),$.selectedClass=null)}r.confirmDelete("",!1,t)}function h(e){e&&e.val.name.length>0&&(console.log("updateClass ",e),s.updateClass(P,e.key,{info:e.info}))}function p(e){console.log("Searching for '"+e+"'")}function v(e,t){$.formTitleText="New",$.selectedClass={},$.selectedClass.key=e,$.selectedClass.val=t,$.selectedClass.info=t.info,$.setEditClassName(!1),$.editModeActive=!1,console.log($.selectedClass),A(),angular.element(document).find(".panel-collapse").removeClass("in")}function y(e){$.editModeActive?($.editModeActive=!1,l.updateMethod(P,$.selectedClass.key,$.editMethodKey,e)):(l.addMethod(P,$.selectedClass.key,e),$.method={},$.method.returnType="Return type"),$.displayMethodForm=!1}function C(e){function t(t){t&&l.removeMethod(P,$.selectedClass.key,e)}e&&r.confirmDelete("","",t)}function k(e,t){$.displayMethodForm=!0,$.formTitleText="Edit",$.method=t,$.editModeActive=!0,$.editMethodKey=e}function w(){$.method.attributes=$.method.attributes||[],$.method.attributes.push({})}function M(e,t,n){e.preventDefault(),$.method.attributes&&$.method.attributes.splice(t,1)}function b(e,t,n){return r.checkForEnterPress(e)?n(t):!1}function F(e){return $.editClass=e}function T(){$.editModeActive=!1,$.formTitleText="New",A(),$.displayMethodForm=!$.displayMethodForm}function L(){$.displayMethodForm=!1,$.formTitleText="New",A()}function A(){$.method={},$.method.returnType="Return type",$.method.attributes=[],$.displayMethodForm=!1}function x(e){var t=$.allClasses[$.selectedClass.key].methods;switch(e){case a.sortMessage["default"]:$.sortMessage=a.sortMessage["default"],P.once("value",f);break;case a.sortMessage.a:$.sortMessage=a.sortMessage.a,$.allClasses[$.selectedClass.key].methods=r.sortList(t,a.sortMessage.a);break;case a.sortMessage.d:$.sortMessage=a.sortMessage.d,$.allClasses[$.selectedClass.key].methods=r.sortList(t,a.sortMessage.d)}}var $=this,P=o.getRef();$.headerTitle=a.headerTitle,$.returnTypes=a.types,$.formTitleText="New",$.editModeActive=!1,$.isLoggedIn=!1,$.sortMessage=a.sortMessage["default"],$.allClasses=[];var D=e;if(P.on("value",f),P.onAuth(function(e){t(function(){$.isLoggedIn=e?!0:!1,e&&n.set("cw_token",e.token)})}),n.get("cw_token")){var N=n.get("cw_token");c.login(P,null,null,N)}$.addNewClass=g,$.removeClass=m,$.updateClass=h,$.handleClassInfo=i,$.selectClass=v,$.search=p,$.addNewMethod=y,$.removeMethod=C,$.updateMethod=k,$.addMethodAttribute=w,$.removeMethodAttribute=M,$.loginPrompt=d,$.logOut=u,$.sortMethodList=x,$.checkForEnter=b,$.setEditClassName=F,$.displayAddNewMethod=T,$.cancelMethodForm=L,$.resetMethodForm=A}angular.module("clickawiki").controller("mainController",e),e.$inject=["loggerFactory","$timeout","storageFactory","constants","firebaseFactory","classFactory","methodFactory","helperFactory","authFactory"]}(),function(){function e(e){var t='<h4>Classes:</h4><ul class="list-group classes"><li ng-repeat="class in vm.allClasses track by $index" ng-class="{active: vm.selectedClass.key === class.key}" class="class-selector list-group-item" ng-click="vm.selectClass(class.key,class.val)"><span class="class-name">{{class.val.name}}</span></li></ul>',n={restict:"EA",transclude:!0};return templateUrl=e.path.templatePath+"cwClassBox.directive.html",e.useWebServer?n.templateUrl=templateUrl:n.template=t,n}angular.module("clickawiki").directive("cwClassBox",e),e.$inject=["constants"]}(),function(){function e(e,t){var n='<nav class="navbar navbar-default"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navcol-1" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand navbar-link" href="#">{{vm.headerTitle}}</a></div><div class="collapse navbar-collapse" id="navcol-1"><form class="navbar-form navbar-left" role="search"><div class="form-group"><div class="input-group"><input type="text" class="form-control" placeholder="Search" ng-model="vm.searchTerm"> <span class="input-group-btn"><button class="btn btn-default" type="button"><span class="glyphicon glyphicon-search" aria-hidden="true" ng-click="vm.search(vm.searchTerm)"></span></button></span></div></div></form><ul class="nav navbar-nav"><li ng-if="!vm.isLoggedIn"><a href="#" ng-click="vm.loginPrompt($event)">Log In</a></li><li ng-if="vm.isLoggedIn"><a href="#" ng-click="vm.logOut($event)">Log Out</a></li></ul></div></div></nav>',a={restrict:"EA",transclude:!0};return templateUrl=t.path.templatePath+"cwHeader.directive.html",t.useWebServer?a.templateUrl=templateUrl:a.template=n,a}angular.module("clickawiki").directive("cwHeader",e),e.$inject=["$compile","constants"]}(),function(){function e(){return console.log("in filter"),function(e,t){if(console.log("in filter"),!e)return e;if(!t)return e;var n=(""+t).toLowerCase(),a={};return angular.forEach(e,function(e,t){var o=(""+e).toLowerCase();-1!==o.indexOf(n)&&(a[t]=e)}),a}}angular.module("clickawiki").filter("methodFilter",e)}();